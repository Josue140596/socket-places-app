(this.webpackJsonpbest_places_app=this.webpackJsonpbest_places_app||[]).push([[0],{44:function(e,t,c){},78:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c(33),r=c.n(a),i=(c(44),c.p+"static/media/logoBPV.b9b80b7f.svg"),o=c(34),l=c.n(o),b=c(2),j=c(35),u=c.n(j),d=Object(s.createContext)(),m=function(e){var t=e.children,c=function(e){var t=Object(s.useMemo)((function(){return u.a.connect(e,{transports:["websocket"]})}),[e]),c=Object(s.useState)(!1),n=Object(b.a)(c,2),a=n[0],r=n[1];return Object(s.useEffect)((function(){r(t.connected)}),[t]),Object(s.useEffect)((function(){t.on("connect",(function(){r(!0)}))}),[t]),Object(s.useEffect)((function(){t.on("disconnect",(function(){r(!1)}))}),[t]),{socket:t,online:a}}("https://socket-places-server.herokuapp.com/"),a=c.socket,r=c.online;return Object(n.jsx)(d.Provider,{value:{socket:a,online:r},children:t})},O=function(){var e=Object(s.useContext)(d).socket;Object(s.useEffect)((function(){return e.on("current-places",(function(e){t(e)})),function(){return e.off("current-places")}}),[e]);var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.getElementById("myChart");new l.a(t,{type:"line",data:{labels:e.map((function(e){return e.name})),datasets:[{label:"Places",borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],data:e.map((function(e){return e.votes}))}]},options:{title:{display:!0,text:"Best Place to Visit",fontColor:"white"}}})};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("canvas",{id:"myChart"})})},f=c(37),p=c(36),v=c.p+"static/media/london.ce4c73a6.jpg",h=function(){var e=Object(s.useContext)(d).socket,t=Object(s.useState)([]),c=Object(b.a)(t,2),a=c[0],r=c[1];Object(s.useEffect)((function(){e.on("current-places",(function(e){r(e)}))}),[e]);var i=function(e){var t=Object(s.useRef)(!0),c=Object(s.useState)({data:null,loading:!0,error:null}),n=Object(b.a)(c,2),a=n[0],r=n[1];Object(s.useEffect)((function(){return function(){t.current=!1}}),[]);var i=Object(f.a)({accessKey:p.a.ACCESS_KEY}).search.getPhotos({query:e,page:1,orientation:"portrait"});return Object(s.useEffect)((function(){i.then((function(e){var c=e.response;t.current&&r({loading:!1,error:null,response:c.results})}))}),[e]),a}("visit"),o=i.response,l=i.loading;return Object(n.jsx)("ol",{className:"list-group flex-column-reverse",children:a.map((function(t,c){return Object(n.jsxs)("li",{className:"list-group-item container-places m-3 fadeInUp",style:{order:t.votes},children:[Object(n.jsxs)("div",{className:"cont-img-with-votes",children:[Object(n.jsx)("div",{className:"img-place ",children:l?Object(n.jsx)("img",{className:"img-fluid imgs",src:v}):Object(n.jsx)("img",{className:"img-fluid imgs",src:o[c].urls.thumb})}),Object(n.jsxs)("div",{className:"for-votes",children:[Object(n.jsxs)("button",{type:"button",className:"btn btn-info btn-like rounded-0",onClick:function(){return c=t.id,void e.emit("incre-place-vote",c);var c},children:[Object(n.jsx)("i",{className:"far fa-thumbs-up m-1"}),"+1"]}),Object(n.jsxs)("button",{type:"button",className:"btn btn-danger btn-dislike rounded-0",onClick:function(){return c=t.id,void e.emit("decre-place-vote",c);var c},children:[Object(n.jsx)("i",{className:"far fa-thumbs-down m-1"}),"-1"]})]})]}),Object(n.jsxs)("div",{className:"container-name-descip p-2",children:[Object(n.jsx)("h3",{children:t.name}),Object(n.jsx)("p",{children:t.description})]}),Object(n.jsxs)("div",{className:"votes",children:[Object(n.jsx)("h3",{className:"text-center m-3",children:"VOTES"}),Object(n.jsx)("h1",{className:"text-center",children:t.votes}),Object(n.jsx)("button",{className:"btn btn-danger btn-block",onClick:function(){return c=t.id,void e.emit("delete-place",c);var c},children:"Delete"})]})]},t.id)}))})},x=c(13),g=c(18),N=function(){var e=Object(s.useContext)(d).socket,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.useState)(e),c=Object(b.a)(t,2),n=c[0],a=c[1];return[n,function(e){var t=e.target;a(Object(g.a)(Object(g.a)({},n),{},Object(x.a)({},t.name,t.value)))},function(){a(e)}]}({name:"",description:""}),c=Object(b.a)(t,3),a=c[0],r=c[1],i=c[2],o=a.name,l=a.description;return Object(n.jsx)("form",{onSubmit:function(t){t.preventDefault(),function(t,c){e.emit("place-add",t,c)}(o,l),i()},children:Object(n.jsxs)("div",{className:"form-control container-add-place mt-3 ",children:[Object(n.jsxs)("div",{className:"title-and-name-input justify-content-around mb-2 ",children:[Object(n.jsx)("h3",{children:"Add place"}),Object(n.jsx)("input",{placeholder:"name",name:"name",value:o,onChange:r})]}),Object(n.jsx)("textarea",{className:"form-control mb-2",name:"description",placeholder:"Description place",value:l,onChange:r}),Object(n.jsx)("button",{className:"btn btn-primary",children:"Add"})]})})};var k=function(){var e=Object(s.useContext)(d).online;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("nav",{className:"navbar nav-con",children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("img",{className:"m-2 ml-3",src:i,alt:"img"}),Object(n.jsx)("h3",{className:"m-2  ",children:"Best places to visit"})]}),Object(n.jsx)("div",{className:"d-flex",children:e?Object(n.jsx)("span",{className:"m-4 text-success",children:"Online"}):Object(n.jsx)("span",{className:"m-4 text-danger",children:"Ofline"})})]}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col ",children:Object(n.jsx)(h,{})}),Object(n.jsxs)("div",{className:"col ",children:[Object(n.jsx)(O,{}),Object(n.jsx)(N,{})]})]})})]})};r.a.render(Object(n.jsx)(m,{children:Object(n.jsx)(k,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.d7684f84.chunk.js.map