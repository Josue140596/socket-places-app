(this.webpackJsonpbest_places_app=this.webpackJsonpbest_places_app||[]).push([[0],{44:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n(33),r=n.n(a),i=(n(44),n(34)),o=n.n(i),l=n(2),b=n(35),j=n.n(b),u=Object(s.createContext)(),d=function(e){var t=e.children,n=function(e){var t=Object(s.useMemo)((function(){return j.a.connect(e,{transports:["websocket"]})}),[e]),n=Object(s.useState)(!1),c=Object(l.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){r(t.connected)}),[t]),Object(s.useEffect)((function(){t.on("connect",(function(){r(!0)}))}),[t]),Object(s.useEffect)((function(){t.on("disconnect",(function(){r(!1)}))}),[t]),{socket:t,online:a}}("https://socket-places-server.herokuapp.com/"),a=n.socket,r=n.online;return Object(c.jsx)(u.Provider,{value:{socket:a,online:r},children:t})},m=function(){var e=Object(s.useContext)(u).socket;Object(s.useEffect)((function(){return e.on("current-places",(function(e){t(e)})),function(){return e.off("current-places")}}),[e]);var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.getElementById("myChart");new o.a(t,{type:"line",data:{labels:e.map((function(e){return e.name})),datasets:[{label:"Places",borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],data:e.map((function(e){return e.votes}))}]},options:{title:{display:!0,text:"Best Place to Visit",fontColor:"white"}}})};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("canvas",{id:"myChart"})})},O=n(37),f=n(36),p=n.p+"static/media/london.ce4c73a6.jpg",h=function(){var e=Object(s.useContext)(u).socket,t=Object(s.useState)([]),n=Object(l.a)(t,2),a=n[0],r=n[1];Object(s.useEffect)((function(){e.on("current-places",(function(e){r(e)}))}),[e]);var i=function(e){var t=Object(s.useRef)(!0),n=Object(s.useState)({data:null,loading:!0,error:null}),c=Object(l.a)(n,2),a=c[0],r=c[1];Object(s.useEffect)((function(){return function(){t.current=!1}}),[]);var i=Object(O.a)({accessKey:f.a.ACCESS_KEY}).search.getPhotos({query:e,page:1,orientation:"portrait"});return Object(s.useEffect)((function(){i.then((function(e){var n=e.response;t.current&&r({loading:!1,error:null,response:n.results})}))}),[e]),a}("visit"),o=i.response,b=i.loading;return Object(c.jsx)("ol",{className:"list-group flex-column-reverse",children:a.map((function(t,n){return Object(c.jsxs)("li",{className:"list-group-item container-places m-3 fadeInUp",style:{order:t.votes},children:[Object(c.jsxs)("div",{className:"cont-img-with-votes",children:[Object(c.jsx)("div",{className:"img-place ",children:b?Object(c.jsx)("img",{className:"img-fluid imgs",src:p}):Object(c.jsx)("img",{className:"img-fluid imgs",src:o[n].urls.thumb})}),Object(c.jsxs)("div",{className:"for-votes",children:[Object(c.jsxs)("button",{type:"button",className:"btn btn-info btn-like rounded-0",onClick:function(){return n=t.id,void e.emit("incre-place-vote",n);var n},children:[Object(c.jsx)("i",{className:"far fa-thumbs-up m-1"}),"+1"]}),Object(c.jsxs)("button",{type:"button",className:"btn btn-danger btn-dislike rounded-0",onClick:function(){return n=t.id,void e.emit("decre-place-vote",n);var n},children:[Object(c.jsx)("i",{className:"far fa-thumbs-down m-1"}),"-1"]})]})]}),Object(c.jsxs)("div",{className:"container-name-descip p-2",children:[Object(c.jsx)("h3",{children:t.name}),Object(c.jsx)("p",{children:t.description})]}),Object(c.jsxs)("div",{className:"votes",children:[Object(c.jsx)("h3",{className:"text-center m-3",children:"VOTES"}),Object(c.jsx)("h1",{className:"text-center",children:t.votes}),Object(c.jsx)("button",{className:"btn btn-danger btn-block",onClick:function(){return n=t.id,void e.emit("delete-place",n);var n},children:"Delete"})]})]},t.id)}))})},v=n(13),x=n(18),g=function(){var e=Object(s.useContext)(u).socket,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.useState)(e),n=Object(l.a)(t,2),c=n[0],a=n[1];return[c,function(e){var t=e.target;a(Object(x.a)(Object(x.a)({},c),{},Object(v.a)({},t.name,t.value)))},function(){a(e)}]}({name:"",description:""}),n=Object(l.a)(t,3),a=n[0],r=n[1],i=n[2],o=a.name,b=a.description;return Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),function(t,n){e.emit("place-add",t,n)}(o,b),i()},children:Object(c.jsxs)("div",{className:"form-control container-add-place mt-3 ",children:[Object(c.jsxs)("div",{className:"title-and-name-input justify-content-around mb-2 ",children:[Object(c.jsx)("h3",{children:"Add place"}),Object(c.jsx)("input",{placeholder:"name",name:"name",value:o,onChange:r})]}),Object(c.jsx)("textarea",{className:"form-control mb-2",name:"description",placeholder:"Description place",value:b,onChange:r}),Object(c.jsx)("button",{className:"btn btn-primary",children:"Add"})]})})};var N=function(){var e=Object(s.useContext)(u).online;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{className:"navbar nav-con",children:[Object(c.jsx)("div",{className:"d-flex",children:Object(c.jsx)("h3",{className:"m-2  ",children:"Best places to visit"})}),Object(c.jsx)("div",{className:"d-flex",children:e?Object(c.jsx)("span",{className:"m-4 text-success",children:"Online"}):Object(c.jsx)("span",{className:"m-4 text-danger",children:"Ofline"})})]}),Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col ",children:Object(c.jsx)(h,{})}),Object(c.jsxs)("div",{className:"col ",children:[Object(c.jsx)(m,{}),Object(c.jsx)(g,{})]})]})})]})};r.a.render(Object(c.jsx)(d,{children:Object(c.jsx)(N,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.1984dfd1.chunk.js.map